# MDX

MDX operates by parsing the markdown into an AST using [remark][] and then generating HTML
from the AST using [rehype][]. remark and rehype are part of the [unifiedjs][] collective

### Setup

1. Install and configure the loader

```shell
npm i -D @mdx-js/loader
```

```js
configs.rules.push({
  test: /\.mdx$/,
  use: ['babel-loader', '@mdx-js/loader'],
})
```

Test adding a link here: [Crystal Ball Projects](https://github.com/crystal-ball)

- [Syntax Highlighting](https://mdxjs.com/guides/syntax-highlighting)

### Syntax highlighting

The two methods of adding code block syntax highlighting outlined in the MDX docs are:

1. Use the [`@mapbox/rehype-prism`][] rehype plugin. The plugin operates during the build
   and adds 0 weight to the vendor bundle, but the result is more opaque for adding
   additional behavior to rendered React elements.
1. Using the `prism-react-renderer` package with a custom `CodeBlock` component set on the
   MDX provider context. The component operates similar to downshift and will allow for
   additional behaviors to be added into the rendered code, but the packages add `26Kb` to
   the vendor bundle weight after _gzip_!.

<!-- Links -->

<!-- prettier-ignore-start -->
[remark]:https://remark.js.org/
[rehype]:https://github.com/rehypejs/rehype
[unifiedjs]:https://unifiedjs.com/
[`@mapbox/rehype-prism`]:https://github.com/mapbox/rehype-prism
[`prism-react-renderer`]:https://github.com/FormidableLabs/prism-react-renderer
<!-- prettier-ignore-end -->
